/*! Wrap - v0.1.0 - 2012-06-13
* http://github.com/filamentgroup/wrap/
* Copyright (c) 2012 Scott Jehl, Filament Group, Inc; Licensed MIT & GPLv2 */
(function(a,b){"use strict";var c=a.document,d=function(a,b){var e=typeof a,f=[];if(a){if(e==="string"&&a.indexOf("<")===0){var g=document.createElement("div");return g.innerHTML=a,d(g).children().each(function(){g.removeChild(this)})}if(e==="function")return d.ready(a);if(e==="string"){if(b)return d(b).find(a);for(var h=0,i=c.querySelectorAll(a),j=i.length;h<j;h++)f[h]=i[h]}else f=f.concat(a)}else f.push(c);return f=d.extend(f,d.fn),f};d.fn={},d.fn.each=function(a){for(var b=0,c=this.length;b<c;b++)a.call(this[b],b);return this},d.fn.find=function(a){var b=[],c;return this.each(function(){c=this.querySelectorAll(a);for(var d=0,e=c.length;d<e;d++)b=b.concat(c[d])}),d(b)},d.fn.children=function(){var a=[],b,c;return this.each(function(){b=this.children,c=-1;while(c++<b.length-1)d.inArray(b[c],a)===-1&&a.push(b[c])}),d(a)},d.qualified="querySelectorAll"in c,d.qualify=function(a){if(a&&d.qualified)return a();if(!a)return d.qualified},d.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},d.inArray=function(a,b){var c=-1;for(var d=0,e=b.length;d<e;d++)b.hasOwnProperty(d)&&b[d]===a&&(c=d);return c},d.ready=function(a){return e&&a&&d.qualified?a.call(document):a&&d.qualified?f.push(a):g(),[c]},d.fn.ready=function(a){return d.ready(a),this};var e=!1,f=[],g=function(){if(!e){while(f.length)f.shift().call(document);e=!0}};a.addEventListener||(a.addEventListener=function(b,c){return a.attachEvent("on"+b,c)}),a.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("readystatechange",g,!1),a.addEventListener("load",g,!1),c.readyState==="complete"&&g(),a.wrap=d})(this),function(a){var b=function(){var a=!1;try{a=new XMLHttpRequest}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}return function(){return a}}();wrap.ajax=function(a,c){var d=b(),e=wrap.ajax.settings;c&&wrap.extend(e,c),a||(a=e.url);if(!d||!a)return;d.open(e.method,a,e.async),d.onreadystatechange=function(){if(d.readyState!==4||d.status!==200&&d.status!==304)return e.error(d.responseText,d.status,d);e.success(d.responseText,d.status,d)};if(d.readyState===4)return;d.send(null)},wrap.ajax.settings={success:function(){},error:function(){},method:"GET",async:!0,data:null}}(),function(a){wrap.get=function(a,b){return wrap.ajax(a,{success:b})}}(),function(a){wrap.fn.load=function(a,b){var c=this,d=arguments,e=function(a){c.each(function(){wrap(this).html(a)}),b&&b.apply(c,d)};return wrap.ajax(a,{success:e}),this}}(),function(a){wrap.post=function(a,b,c){return wrap.ajax(a,{data:b,method:"POST",success:c})}}(),function(a){wrap.fn.data=function(b,c){return b!==a?c!==a?this.each(function(){this.wrapData||(this.wrapData={}),this.wrapData[b]=c}):this[0].wrapData&&this[0].wrapData[b]:this[0].wrapData}}(),function(a){wrap.fn.removeData=function(b){return this.each(function(){b!==a&&this.wrapData?(this.wrapData[b]=a,delete this.wrapData[b]):this[0].wrapData={}})}}(),function(a){window.$=wrap}(),function(a){wrap.fn.addClass=function(a){return this.each(function(){this.className+=" "+a})}}(),function(a){wrap.fn.after=function(b){if(typeof b=="string"||b.nodeType!==a)b=wrap(b);return this.each(function(a){for(var c=0,d=b.length;c<d;c++){var e=a>0?b[c].cloneNode(!0):b[c];this.parentNode.insertBefore(e,this),this.parentNode.insertBefore(this,e)}})},wrap.fn.insertAfter=function(a){return this.each(function(){wrap(a).after(this)})}}(),function(a){wrap.fn.append=function(b){if(typeof b=="string"||b.nodeType!==a)b=wrap(b);return this.each(function(a){for(var c=0,d=b.length;c<d;c++)this.appendChild(a>0?b[c].cloneNode(!0):b[c])})},wrap.fn.appendTo=function(a){return this.each(function(){wrap(a).append(this)})}}(),function(a){wrap.fn.attr=function(b,c){var d=typeof b=="string";return c!==a||!d?this.each(function(){if(d)this.setAttribute(b,c);else for(var a in b)b.hasOwnProperty(a)&&this.setAttribute(a,b[a])}):this[0].getAttribute(b)}}(),function(a){wrap.fn.before=function(b){if(typeof b=="string"||b.nodeType!==a)b=wrap(b);return this.each(function(a){for(var c=0,d=b.length;c<d;c++)this.parentNode.insertBefore(a>0?b[c].cloneNode(!0):b[c],this)})},wrap.fn.insertBefore=function(a){return this.each(function(){wrap(a).before(this)})}}(),function(a){wrap.fn.closest=function(a){var b=[];return a?(this.each(function(){var c=this,d=0;wrap(a).each(function(){if(c===this)b[0]=c;else{var a=0;while(c.parentElement&&(!d||a<d))a++,c.parentElement===this?(b[0]=c.parentElement,d=a):c=c.parentElement}})}),wrap(b)):wrap(b)}}(),function(a){wrap.fn.css=function(b,c){return typeof b=="object"?this.each(function(){for(var a in b)b.hasOwnProperty(a)&&(this.style[a]=b[a])}):c!==a?this.each(function(){this.style[b]=c}):window.getComputedStyle(this[0],b)}}(),function(a){wrap.fn.eq=function(a){return wrap(this[a])}}(),function(a){wrap.fn.filter=function(a){var b=[],c=wrap(a);return this.each(function(){if(!this.parentNode){var d=wrap(document.createDocumentFragment());d[0].appendChild(this),c=wrap(a,d)}wrap.inArray(this,c)>-1&&b.push(this)}),wrap(b)}}(),function(a){wrap.fn.get=function(a){return this[a]}}(),function(a){wrap.fn.html=function(a){if(a)return this.each(function(){this.innerHTML=a});var b="";return this.each(function(){b+=this.innerHTML})}}(),function(a){wrap.fn.is=function(a){var b=!1;return this.each(function(c){wrap.inArray(this,wrap(a))>-1&&(b=!0)}),b}}(),function(a){wrap.fn.next=function(){var a=[],b;return this.each(function(c){b=this.nextElementSibling,b&&(a=a.concat(b))}),wrap(a)}}(),function(a){wrap.fn.not=function(a){var b=[];return this.each(function(c){wrap.inArray(this,wrap(a))===-1&&b.push(this)}),wrap(b)}}(),function(a){wrap.fn.parent=function(){var a=[],b;return this.each(function(){b=this.parentElement,b&&a.push(b)}),wrap(a)}}(),function(a){wrap.fn.parents=function(a){var b=[];return this.each(function(){var c=this,d;while(c.parentElement&&!d)c=c.parentElement,a?c===wrap(a)[0]&&(d=!0,wrap.inArray(c,b)===-1&&b.push(c)):wrap.inArray(c,b)===-1&&b.push(c)}),wrap(b)}}(),function(a){wrap.fn.prepend=function(b){if(typeof b=="string"||b.nodeType!==a)b=wrap(b);return this.each(function(a){for(var c=0,d=b.length;c<d;c++){var e=a>0?b[c].cloneNode(!0):b[c];this.firstChild?this.insertBefore(e,this.firstChild):this.appendChild(e)}})},wrap.fn.prependTo=function(a){return this.each(function(){wrap(a).prepend(this)})}}(),function(a){wrap.fn.prev=function(){var a=[],b;return this.each(function(c){b=this.previousElementSibling,b&&(a=a.concat(b))}),wrap(a)}}(),function(a){wrap.fn.prop=function(b,c){return b=wrap.propFix[b]||b,c!==a?this.each(function(){this[b]=c}):this[0][b]},wrap.propFix={"class":"className",contenteditable:"contentEditable","for":"htmlFor",readonly:"readOnly",tabindex:"tabIndex"}}(),function(a){wrap.fn.remove=function(a){return this.each(function(){this.parentNode.removeChild(this)})}}(),function(a){wrap.fn.removeAttr=function(a){return this.each(function(){this.removeAttribute(a)})}}(),function(a){wrap.fn.removeClass=function(a){return this.each(function(){this.className=this.className.replace(new RegExp(a,"gmi"),"")})}}(),function(a){wrap.fn.removeProp=function(b){var c=wrap.propFix&&wrap.propFix[c]||c;return this.each(function(){this[b]=a,delete this[b]})}}(),function(a){wrap.fn.replaceWith=function(a){typeof a=="string"&&(a=wrap(a));var b=[];return this.each(function(c){for(var d=0,e=a.length;d<e;d++){var f=c>0?a[d].cloneNode(!0):a[d];this.parentNode.insertBefore(f,this),f.parentNode.removeChild(this),b.push(f)}}),wrap(b)}}(),function(a){wrap.fn.siblings=function(){var a=[],b=this[0].parentNode.firstChild;while(b=b.nextSibling)b.nodeType===1&&b!==this[0]&&a.push(b);return wrap(a)}}(),function(a){wrap.fn.bind=function(a,b){return this.each(function(){var c=function(a){b.apply(this,[a].concat(a.args||[]))};"addEventListener"in this?this.addEventListener(a,c,!1):this.attachEvent&&this.attachEvent("on"+a,c)})}}(),function(a){wrap.fn.live=function(a,b){return this.each(function(){function d(a){a.target===c&&b&&b.apply(c,[a].concat(a.args||[]))}var c=this;"addEventListener"in document?document.addEventListener(a,d,!1):document.attachEvent&&document.attachEvent("on"+a,d)})}}(),function(a){wrap.fn.trigger=function(a,b){return this.each(function(){if(document.createEvent){var c=document.createEvent("Event");c.initEvent(a,!0,!0),c.args=b,this.dispatchEvent(c)}})}}();